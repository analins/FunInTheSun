<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fun In The Sun</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <% include ./partials/head %>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" charset="utf-8"></script>
</head>
<body>
    <% include ./partials/navbar %>
    <div class="ui-widget">
    <form>
        <input id="search" type="search"><button type="submit" class="btn">Search</button>
    </form>
    </div>
    <script>
        var searchbar = $("#search");
        var timeout;
        var availableTags=['a','aa','aad', 'ava'];
        searchbar.on('keyup', function(){
            clearTimeout(timeout);
            timeout=setTimeout(function(){
                var search = searchbar.val();

                $.ajax({
                    method: 'post',
                    url: "/api/users/autocomplete",
                    data: {search: search},
                    success: function(data){
                        var nameArr=[];
                        for (var i = 0; i < data.length; i++) {

                            nameArr.push(data[i].name)
                        }
                        // availableTags = nameArr;
                        searchbar.autocomplete({
                          source: nameArr
                        });
                    }
                });
            }, 350)
        });
        $('form').on('submit', function(e){e.preventDefault();})




    </script>
</body>
</html>
